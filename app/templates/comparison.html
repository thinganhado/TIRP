{% extends "base.html" %}

{% block title %}Allocation Comparison{% endblock %}

{% block content %}

<!-- Breadcrumb -->
<div class="breadcrumb-bar">
    <a href="{{ url_for('main.dashboard') }}">Home</a> /
    <a href="{{ url_for('main.overall') }}">Visualisation</a> /
    <span>Allocation Comparison</span>
</div>

<!-- Intro Section -->
<section class="intro-box">
    <h2 class="section-title">Comparing Class Allocations</h2>
    <p>This page compares the Genetic Algorithm (GA) allocation with a Random allocation using GPA, wellbeing, and conflict metrics.</p>
</section>

<!-- Graphs Row -->
<section class="comparison-graph-section">
    <div class="graph-row">
        <div class="graph-box">
            <h4>Wellbeing Distribution (GA)</h4>
            {% if wellbeing_chart_img %}
                <img src="data:image/png;base64,{{ wellbeing_chart_img }}" class="graph-img" alt="Wellbeing Chart">
            {% else %}
                <p>Wellbeing chart unavailable.</p>
            {% endif %}
        </div>

        <div class="graph-box">
            <h4>GPA per Class</h4>
            {% if gpa_chart_img %}
                <img src="data:image/png;base64,{{ gpa_chart_img }}" class="graph-img" alt="GPA Chart">
            {% else %}
                <p>GPA chart unavailable.</p>
            {% endif %}
        </div>

        <div class="graph-box">
            <h4>Conflict Count</h4>
            {% if conflict_chart_img %}
                <img src="data:image/png;base64,{{ conflict_chart_img }}" class="graph-img" alt="Conflict Chart">
            {% else %}
                <p>Conflict chart unavailable.</p>
            {% endif %}
        </div>
    </div>
</section>

<!-- Insights Section -->
<section class="insight-section">
    <h3 class="section-title">Observations from GA Allocation</h3>
    <div class="insight-cards-container">
        <div class="insight-card">
            <h4>Friendship Coverage</h4>
            <p>{{ ga_insights.friendship_coverage }}</p>
        </div>
        <div class="insight-card">
            <h4>Friendship Balance</h4>
            <p>{{ ga_insights.friendship_balance }}</p>
        </div>
        <div class="insight-card">
            <h4>GPA Fairness</h4>
            <p>{{ ga_insights.gpa_fairness }}</p>
        </div>
        <div class="insight-card">
            <h4>High-Risk Dynamics</h4>
            <p>{{ ga_insights.high_risk_dynamics }}</p>
        </div>
        <div class="insight-card">
            <h4>Wellbeing Imbalance</h4>
            <p>{{ ga_insights.wellbeing_imbalance }}</p>
        </div>
    </div>
</section>

<!-- Style -->
<style>
.graph-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 20px;
    margin: 40px 0;
}

.graph-box {
    flex: 1;
    min-width: 280px;
    text-align: center;
}

.graph-img {
    width: 100%;
    max-width: 400px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
}

.insight-cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.insight-card {
    background-color: #ffffff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}
</style>

{% endblock %}